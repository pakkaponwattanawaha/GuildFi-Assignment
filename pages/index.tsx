import type { NextPage } from "next";
import Head from "next/head";

import styles from "../styles/Home.module.css";

import { Canvas, useFrame, useLoader, useThree } from "@react-three/fiber";
import { Cloud, OrbitControls, Stars } from "@react-three/drei";
import { Physics, usePlane, useBox } from "@react-three/cannon";
import * as THREE from "three";
import { Mesh, PlaneGeometry } from "three";
import { Suspense, useMemo, useRef } from "react";
import { Water } from "three/examples/jsm/objects/Water.js";
import { TerrainPlane } from "../components/TerrainPlane";
import { LoadingSuspense } from "../components/LoadingSuspense";
import { ObjectModelOverlay } from "../components/ObjectModelOverlay";
import { CityRegionOverlay } from "../components/CityRegionOverlay";

function Fog() {
  const ref = useRef();
  const [cloud, cloud_texture] = useLoader(THREE.TextureLoader, [
    "https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",
    "texture/clouds.jpg",
  ]);
  return (
    <mesh rotation={[-Math.PI / 2, 0, 0]}>
      {/* <planeBufferGeometry attach="geometry" args={[12, 12, 1024, 1024]} /> */}
      <Cloud width={12} position={[0, 3, 0]} speed={0.2} opacity={1.25} />
      {/* <meshLambertMaterial map={fog} transparent={true} /> */}
      {/* <meshStandardMaterial
        map={texture.terrain_z1}
        displacementMap={mask.depth_z1}
        displacementScale={1}
        metalnessMap={mask.ocean_z1}
        metalness={2.25}
        fog={true}
      /> */}
    </mesh>
  );
}

const Home: NextPage = () => {
  return (
    <div className={styles.container}>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <Suspense fallback={<LoadingSuspense />}>
        <Canvas>
          <OrbitControls
            enablePan={true}
            mouseButtons={{
              LEFT: THREE.MOUSE.PAN,
              MIDDLE: THREE.MOUSE.DOLLY,
              RIGHT: THREE.MOUSE.ROTATE,
            }}
          />
          <Stars />
          <ambientLight intensity={0.7} />
          {/* <spotLight position={[10, 15, 3]} angle={0.25} /> */}
          {/* <pointLight intensity={0.5} position={[0, 0, 1]} /> */}
          {/* <Fog /> */}
          {/* <Ocean /> */}
          {/* <CityObject /> */}
          <CityRegionOverlay />
          <ObjectModelOverlay />
          <TerrainPlane />
        </Canvas>
      </Suspense>
    </div>
  );
};

export default Home;
